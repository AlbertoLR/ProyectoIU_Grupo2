-- MySQL Script generated by MySQL Workbench
-- 11/15/16 23:42:41
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema IU
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema IU
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `IU` DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ;
USE `IU` ;

-- -----------------------------------------------------
-- Table `IU`.`EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`EMPLEADO` (
  `TIPO` VARCHAR(15) NOT NULL,
  `DNI_E` VARCHAR(9) NOT NULL,
  `NOMBRE_E` VARCHAR(15) NOT NULL,
  `APELLIDOS_E` VARCHAR(40) NOT NULL,
  `FECHA_NAC` DATE NOT NULL,
  `DIRECCION` VARCHAR(50) NOT NULL,
  `COMENTARIO` VARCHAR(500) NULL,
  `NUM_CUENTA` VARCHAR(24) NOT NULL,
  `TIPO_CONTRATO` VARCHAR(20) NOT NULL,
  `EMAIL` VARCHAR(40) NOT NULL,
  `FOTO` MEDIUMBLOB NULL,
  `ACTIVO` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`DNI_E`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `IU`.`PERFIL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`PERFIL` (
  `TIPO` VARCHAR(15) NOT NULL,
  PRIMARY KEY (`TIPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`CONTROLADOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`CONTROLADOR` (
  `ID_CONTROLADOR` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`ID_CONTROLADOR`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`USA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`USA` (
  `TIPO` VARCHAR(15) NOT NULL,
  `ID_CONTROLADOR` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`TIPO`, `ID_CONTROLADOR`),
  INDEX `ID_CONTROLADOR_idx` (`ID_CONTROLADOR` ASC),
  CONSTRAINT `TIPO`
    FOREIGN KEY (`TIPO`)
    REFERENCES `IU`.`PERFIL` (`TIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_CONTROLADOR`
    FOREIGN KEY (`ID_CONTROLADOR`)
    REFERENCES `IU`.`CONTROLADOR` (`ID_CONTROLADOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`ACCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`ACCION` (
  `ID_ACCION` VARCHAR(10) NOT NULL,
  `ID_CONTROLADOR` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`ID_ACCION`, `ID_CONTROLADOR`),
  INDEX `ID_CONTROLADOR_idx` (`ID_CONTROLADOR` ASC),
  CONSTRAINT `ID_CONTROLADOR`
    FOREIGN KEY (`ID_CONTROLADOR`)
    REFERENCES `IU`.`CONTROLADOR` (`ID_CONTROLADOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`CONTROLA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`CONTROLA` (
  `ID_CONTROLADOR` VARCHAR(20) NOT NULL,
  `DNI_E` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`ID_CONTROLADOR`, `DNI_E`),
  INDEX `DNI_E_idx` (`DNI_E` ASC),
  CONSTRAINT `ID_CONTROLADOR`
    FOREIGN KEY (`ID_CONTROLADOR`)
    REFERENCES `IU`.`CONTROLADOR` (`ID_CONTROLADOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_E`
    FOREIGN KEY (`DNI_E`)
    REFERENCES `IU`.`EMPLEADO` (`DNI_E`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`CLIENTE` (
  `DNI_C` VARCHAR(9) NOT NULL,
  `NOMBRE_C` VARCHAR(15) NOT NULL,
  `APELLIDOS_C` VARCHAR(40) NOT NULL,
  `FECHA_NAC` DATE NULL,
  `PROFESION` VARCHAR(20) NULL,
  `TELEFONO` INT(11) NULL,
  `DIRECCION` VARCHAR(50) NULL,
  `COMENTARIO` VARCHAR(500) NULL,
  `EMAIL` VARCHAR(30) NULL,
  `ALERTA_FALTA` TINYINT(1) NOT NULL DEFAULT 0,
  `DESEMPLEADO` TINYINT(1) NOT NULL DEFAULT 0,
  `ESTUDIANTE` TINYINT(1) NOT NULL DEFAULT 0,
  `FAMILIAR` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`DNI_C`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`PARTICULAR_EXTERNO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`PARTICULAR_EXTERNO` (
  `NOMBRE` VARCHAR(20) NOT NULL,
  `APELLIDOS` VARCHAR(30) NOT NULL,
  `TELEFONO` INT(11) NOT NULL,
  PRIMARY KEY (`NOMBRE`, `APELLIDOS`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`RESERVA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`RESERVA` (
  `ID_ESPACIO` VARCHAR(10) NOT NULL,
  `DNI_C` VARCHAR(9) NULL,
  `ID_RESERVA` VARCHAR(10) NOT NULL,
  `PRECIO_ESPACIO` SMALLINT NULL,
  `PRECIO_FISIO` SMALLINT NULL,
  PRIMARY KEY (`ID_ESPACIO`, `ID_RESERVA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`INSCRIPCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`INSCRIPCION` (
  `ID_INSCRIPCION` VARCHAR(10) NOT NULL,
  `NOMBRE` VARCHAR(20) NULL,
  `APELLIDOS` VARCHAR(30) NULL,
  `ID_EVENTO` VARCHAR(10) NULL,
  `ID_ACTIVIDAD` VARCHAR(10) NULL,
  `ID_RESERVA` VARCHAR(10) NULL,
  `DNI_C` VARCHAR(9) NOT NULL,
  `FECHA` DATE NULL,
  PRIMARY KEY (`ID_INSCRIPCION`, `DNI_C`),
  INDEX `DNI_C_idx` (`DNI_C` ASC),
  INDEX `ID_RESERVA_idx` (`ID_RESERVA` ASC),
  INDEX `NOMBRE_idx` (`NOMBRE` ASC),
  INDEX `APELLIDOS_idx` (`APELLIDOS` ASC),
  CONSTRAINT `DNI_C`
    FOREIGN KEY (`DNI_C`)
    REFERENCES `IU`.`CLIENTE` (`DNI_C`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `NOMBRE`
    FOREIGN KEY (`NOMBRE`)
    REFERENCES `IU`.`PARTICULAR_EXTERNO` (`NOMBRE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `APELLIDOS`
    FOREIGN KEY (`APELLIDOS`)
    REFERENCES `IU`.`PARTICULAR_EXTERNO` (`APELLIDOS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_RESERVA`
    FOREIGN KEY (`ID_RESERVA`)
    REFERENCES `IU`.`RESERVA` (`ID_RESERVA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`DOCUMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`DOCUMENTO` (
  `DNI_E` VARCHAR(9) NULL,
  `DNI_C` VARCHAR(9) NULL,
  `ID_INSCRIPCION` VARCHAR(20) NULL,
  `ID_DOCUMENTO` VARCHAR(10) NOT NULL,
  `TIPO` VARCHAR(50) NOT NULL,
  `NOMBRE` VARCHAR(50) NOT NULL,
  `CONTENIDO` MEDIUMBLOB NOT NULL,
  PRIMARY KEY (`ID_DOCUMENTO`),
  INDEX `DNI_C_idx` (`DNI_C` ASC),
  INDEX `ID_INSCRIPCION_idx` (`ID_INSCRIPCION` ASC),
  INDEX `DNI_E_idx` (`DNI_E` ASC),
  CONSTRAINT `DNI_E`
    FOREIGN KEY (`DNI_E`)
    REFERENCES `IU`.`EMPLEADO` (`DNI_E`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_C`
    FOREIGN KEY (`DNI_C`)
    REFERENCES `IU`.`CLIENTE` (`DNI_C`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_INSCRIPCION`
    FOREIGN KEY (`ID_INSCRIPCION`)
    REFERENCES `IU`.`INSCRIPCION` (`ID_INSCRIPCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`LESIONES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`LESIONES` (
  `ID_LESION` VARCHAR(10) NOT NULL,
  `DESCRIPCION` TEXT NULL,
  PRIMARY KEY (`ID_LESION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`LESION_CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`LESION_CLIENTE` (
  `ID_LESION` VARCHAR(10) NOT NULL,
  `DNI_C` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`ID_LESION`, `DNI_C`),
  INDEX `DNI_C_idx` (`DNI_C` ASC),
  CONSTRAINT `DNI_C`
    FOREIGN KEY (`DNI_C`)
    REFERENCES `IU`.`CLIENTE` (`DNI_C`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_LESION`
    FOREIGN KEY (`ID_LESION`)
    REFERENCES `IU`.`LESIONES` (`ID_LESION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`LESION_EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`LESION_EMPLEADO` (
  `ID_LESION` VARCHAR(10) NOT NULL,
  `DNI_E` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`ID_LESION`, `DNI_E`),
  INDEX `DNI_E_idx` (`DNI_E` ASC),
  CONSTRAINT `ID_LESION`
    FOREIGN KEY (`ID_LESION`)
    REFERENCES `IU`.`LESIONES` (`ID_LESION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_E`
    FOREIGN KEY (`DNI_E`)
    REFERENCES `IU`.`EMPLEADO` (`DNI_E`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`EMPLEADO_MIRA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`EMPLEADO_MIRA` (
  `DNI_E` VARCHAR(9) NOT NULL,
  `DNI_C` VARCHAR(9) NOT NULL,
  `ID_LESION` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`DNI_E`, `DNI_C`, `ID_LESION`),
  INDEX `DNI_C_idx` (`DNI_C` ASC),
  INDEX `ID_LESION_idx` (`ID_LESION` ASC),
  CONSTRAINT `DNI_C`
    FOREIGN KEY (`DNI_C`)
    REFERENCES `IU`.`LESION_CLIENTE` (`DNI_C`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_LESION`
    FOREIGN KEY (`ID_LESION`)
    REFERENCES `IU`.`LESION_CLIENTE` (`ID_LESION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_E`
    FOREIGN KEY (`DNI_E`)
    REFERENCES `IU`.`EMPLEADO` (`DNI_E`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`ESPACIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`ESPACIO` (
  `ID_ESPACIO` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`ID_ESPACIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`EVENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`EVENTO` (
  `ID_EVENTO` VARCHAR(10) NOT NULL,
  `NOMBRE` VARCHAR(10) NOT NULL,
  `ID_ESPACIO` VARCHAR(10) NOT NULL,
  `PRECIO` SMALLINT NOT NULL,
  PRIMARY KEY (`ID_EVENTO`),
  INDEX `ID_ESPACIO_idx` (`ID_ESPACIO` ASC),
  CONSTRAINT `ID_ESPACIO`
    FOREIGN KEY (`ID_ESPACIO`)
    REFERENCES `IU`.`ESPACIO` (`ID_ESPACIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`CATEGORIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`CATEGORIA` (
  `TIPO` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`TIPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`DESCUENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`DESCUENTO` (
  `ID_DESCUENTO` VARCHAR(10) NOT NULL,
  `DESCRIPCION` TEXT NOT NULL,
  `TIPO` VARCHAR(10) NULL,
  `CANTIDAD` FLOAT NOT NULL,
  PRIMARY KEY (`ID_DESCUENTO`),
  INDEX `TIPO_idx` (`TIPO` ASC),
  CONSTRAINT `TIPO`
    FOREIGN KEY (`TIPO`)
    REFERENCES `IU`.`CATEGORIA` (`TIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`ACTIVIDAD`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`ACTIVIDAD` (
  `ID_ACTIVIDAD` VARCHAR(10) NOT NULL,
  `NOMBRE` VARCHAR(10) NOT NULL,
  `ID_ESPACIO` VARCHAR(10) NOT NULL,
  `ID_DESCUENTO` VARCHAR(10) NOT NULL,
  `CAPACIDAD` SMALLINT NOT NULL,
  `PRECIO` SMALLINT NOT NULL,
  `TIPO` VARCHAR(10) NULL,
  PRIMARY KEY (`ID_ACTIVIDAD`),
  INDEX `ID_ESPACIO_idx` (`ID_ESPACIO` ASC),
  INDEX `TIPO_idx` (`TIPO` ASC),
  INDEX `ID_DESCUENTO_idx` (`ID_DESCUENTO` ASC),
  CONSTRAINT `ID_ESPACIO`
    FOREIGN KEY (`ID_ESPACIO`)
    REFERENCES `IU`.`ESPACIO` (`ID_ESPACIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_DESCUENTO`
    FOREIGN KEY (`ID_DESCUENTO`)
    REFERENCES `IU`.`DESCUENTO` (`ID_DESCUENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `TIPO`
    FOREIGN KEY (`TIPO`)
    REFERENCES `IU`.`CATEGORIA` (`TIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`SESION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`SESION` (
  `ID_ESPACIO` VARCHAR(10) NOT NULL,
  `ID_EVENTO` VARCHAR(10) NULL,
  `ID_ACTIVIDAD` VARCHAR(10) NULL,
  `DNI_E` VARCHAR(9) NOT NULL,
  `DIA` DATE NOT NULL,
  `HORA_INICIO` TIME NOT NULL,
  `HORA_FIN` TIME NOT NULL,
  PRIMARY KEY (`ID_ESPACIO`, `DNI_E`, `DIA`, `HORA_INICIO`, `HORA_FIN`),
  INDEX `DNI_E_idx` (`DNI_E` ASC),
  INDEX `ID_EVENTO_idx` (`ID_EVENTO` ASC),
  INDEX `ID_ACTIVIDAD_idx` (`ID_ACTIVIDAD` ASC),
  CONSTRAINT `DNI_E`
    FOREIGN KEY (`DNI_E`)
    REFERENCES `IU`.`EMPLEADO` (`DNI_E`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_EVENTO`
    FOREIGN KEY (`ID_EVENTO`)
    REFERENCES `IU`.`EVENTO` (`ID_EVENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_ACTIVIDAD`
    FOREIGN KEY (`ID_ACTIVIDAD`)
    REFERENCES `IU`.`ACTIVIDAD` (`ID_ACTIVIDAD`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_ESPACIO`
    FOREIGN KEY (`ID_ESPACIO`)
    REFERENCES `IU`.`ESPACIO` (`ID_ESPACIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`HORARIO_TEMPORADA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`HORARIO_TEMPORADA` (
  `ID_TEMPORADA` VARCHAR(10) NOT NULL,
  `DIA_INICIO` DATE NOT NULL,
  `DIA_FIN` DATE NOT NULL,
  PRIMARY KEY (`ID_TEMPORADA`, `DIA_INICIO`, `DIA_FIN`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`RANGO_HORARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`RANGO_HORARIO` (
  `DIA_S` VARCHAR(10) NOT NULL,
  `HORA_APERTURA` TIME NOT NULL,
  `HORA_CIERRE` TIME NOT NULL,
  `ID_TEMPORADA` VARCHAR(10) NOT NULL,
  `DIA_INICIO` DATE NULL,
  `DIA_FIN` DATE NULL,
  PRIMARY KEY (`DIA_S`, `HORA_APERTURA`, `HORA_CIERRE`),
  INDEX `ID_TEMPORADA_idx` (`ID_TEMPORADA` ASC),
  INDEX `DIA_INICIO_idx` (`DIA_INICIO` ASC),
  INDEX `DIA_FIN_idx` (`DIA_FIN` ASC),
  CONSTRAINT `ID_TEMPORADA`
    FOREIGN KEY (`ID_TEMPORADA`)
    REFERENCES `IU`.`HORARIO_TEMPORADA` (`ID_TEMPORADA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DIA_INICIO`
    FOREIGN KEY (`DIA_INICIO`)
    REFERENCES `IU`.`HORARIO_TEMPORADA` (`DIA_INICIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DIA_FIN`
    FOREIGN KEY (`DIA_FIN`)
    REFERENCES `IU`.`HORARIO_TEMPORADA` (`DIA_FIN`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`HORAS_POSIBLES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`HORAS_POSIBLES` (
  `DIA` DATE NOT NULL,
  `HORA_INICIO` TIME NOT NULL,
  `HORA_FIN` TIME NOT NULL,
  `DIA_S` VARCHAR(10) NOT NULL,
  `HORA_APERTURA` TIME NOT NULL,
  `HORA_CIERRE` TIME NOT NULL,
  PRIMARY KEY (`DIA`, `HORA_INICIO`, `HORA_FIN`),
  INDEX `DIA_S_idx` (`DIA_S` ASC),
  INDEX `HORA_APERTURA_idx` (`HORA_APERTURA` ASC),
  INDEX `HORA_CIERRE_idx` (`HORA_CIERRE` ASC),
  CONSTRAINT `DIA_S`
    FOREIGN KEY (`DIA_S`)
    REFERENCES `IU`.`RANGO_HORARIO` (`DIA_S`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `HORA_APERTURA`
    FOREIGN KEY (`HORA_APERTURA`)
    REFERENCES `IU`.`RANGO_HORARIO` (`HORA_APERTURA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `HORA_CIERRE`
    FOREIGN KEY (`HORA_CIERRE`)
    REFERENCES `IU`.`RANGO_HORARIO` (`HORA_CIERRE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`PAGO` (
  `ID_PAGO` VARCHAR(10) NOT NULL,
  `METODO_PAGO` VARCHAR(20) NOT NULL,
  `FECHA` DATE NOT NULL,
  `PERIODICIDAD` VARCHAR(45) NOT NULL,
  `CANTIDAD` SMALLINT NOT NULL,
  `ID_INSCRIPCION` VARCHAR(10) NULL,
  `ID_RESERVA` VARCHAR(10) NULL,
  PRIMARY KEY (`ID_PAGO`),
  INDEX `ID_INSCRIPCION_idx` (`ID_INSCRIPCION` ASC),
  INDEX `ID_RESERVA_idx` (`ID_RESERVA` ASC),
  CONSTRAINT `ID_INSCRIPCION`
    FOREIGN KEY (`ID_INSCRIPCION`)
    REFERENCES `IU`.`INSCRIPCION` (`ID_INSCRIPCION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_RESERVA`
    FOREIGN KEY (`ID_RESERVA`)
    REFERENCES `IU`.`RESERVA` (`ID_RESERVA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`ALERTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`ALERTA` (
  `ID_ALERTA` VARCHAR(10) NOT NULL,
  `DESCRIPCION` TEXT NOT NULL,
  `ID_SESION` VARCHAR(10) NULL,
  `DNI_E` VARCHAR(9) NULL,
  `ID_PAGO` VARCHAR(10) NULL,
  PRIMARY KEY (`ID_ALERTA`),
  INDEX `ID_PAGO_idx` (`ID_PAGO` ASC),
  CONSTRAINT `DNI_E`
    FOREIGN KEY ()
    REFERENCES `IU`.`EMPLEADO` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_PAGO`
    FOREIGN KEY (`ID_PAGO`)
    REFERENCES `IU`.`PAGO` (`ID_PAGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`NOTIFICACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`NOTIFICACION` (
  `ID_NOTIFICACION` VARCHAR(10) NOT NULL,
  `DESCRIPCION` TEXT NOT NULL,
  `DNI_E` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`ID_NOTIFICACION`),
  INDEX `DNI_E_idx` (`DNI_E` ASC),
  CONSTRAINT `DNI_E`
    FOREIGN KEY (`DNI_E`)
    REFERENCES `IU`.`EMPLEADO` (`DNI_E`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`RECIBE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`RECIBE` (
  `ID_NOTIFICACION` VARCHAR(10) NOT NULL,
  `DNI_C` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`ID_NOTIFICACION`, `DNI_C`),
  INDEX `DNI_C_idx` (`DNI_C` ASC),
  CONSTRAINT `ID_NOTIFICACION`
    FOREIGN KEY (`ID_NOTIFICACION`)
    REFERENCES `IU`.`NOTIFICACION` (`ID_NOTIFICACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_C`
    FOREIGN KEY (`DNI_C`)
    REFERENCES `IU`.`CLIENTE` (`DNI_C`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`PERCIBE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`PERCIBE` (
  `ID_ALERTA` VARCHAR(10) NOT NULL,
  `DNI_E` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`ID_ALERTA`, `DNI_E`),
  INDEX `DNI_E_idx` (`DNI_E` ASC),
  CONSTRAINT `ID_ALERTA`
    FOREIGN KEY (`ID_ALERTA`)
    REFERENCES `IU`.`ALERTA` (`ID_ALERTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_E`
    FOREIGN KEY (`DNI_E`)
    REFERENCES `IU`.`EMPLEADO` (`DNI_E`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`ASISTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`ASISTE` (
  `DNI_C` VARCHAR(9) NOT NULL,
  `ID_ESPACIO` VARCHAR(10) NOT NULL,
  `DNI_E` VARCHAR(9) NOT NULL,
  `DIA` DATE NOT NULL,
  `HORA_INICIO` TIME NOT NULL,
  `HORA_FIN` TIME NOT NULL,
  PRIMARY KEY (`DNI_C`, `ID_ESPACIO`, `DNI_E`, `DIA`, `HORA_INICIO`, `HORA_FIN`),
  INDEX `ID_ESPACIO_idx` (`ID_ESPACIO` ASC),
  INDEX `DIA_idx` (`DIA` ASC),
  INDEX `HORA_INICIO_idx` (`HORA_INICIO` ASC),
  INDEX `HORA_FIN_idx` (`HORA_FIN` ASC),
  CONSTRAINT `ID_ESPACIO`
    FOREIGN KEY (`ID_ESPACIO`)
    REFERENCES `IU`.`SESION` (`ID_ESPACIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_E`
    FOREIGN KEY ()
    REFERENCES `IU`.`EMPLEADO` ()
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_C`
    FOREIGN KEY (`DNI_C`)
    REFERENCES `IU`.`CLIENTE` (`DNI_C`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DIA`
    FOREIGN KEY (`DIA`)
    REFERENCES `IU`.`SESION` (`DIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `HORA_INICIO`
    FOREIGN KEY (`HORA_INICIO`)
    REFERENCES `IU`.`SESION` (`HORA_INICIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `HORA_FIN`
    FOREIGN KEY (`HORA_FIN`)
    REFERENCES `IU`.`SESION` (`HORA_FIN`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`HORA_FISIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`HORA_FISIO` (
  `ID_RESERVA` VARCHAR(10) NOT NULL,
  `DIA_F` DATE NOT NULL,
  `HORA_I` TIME NOT NULL,
  `HORA_F` TIME NOT NULL,
  PRIMARY KEY (`DIA_F`, `HORA_I`, `HORA_F`),
  INDEX `ID_RESERVA_idx` (`ID_RESERVA` ASC),
  CONSTRAINT `ID_RESERVA`
    FOREIGN KEY (`ID_RESERVA`)
    REFERENCES `IU`.`RESERVA` (`ID_RESERVA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`FACTURA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`FACTURA` (
  `ID_FACTURA` VARCHAR(10) NOT NULL,
  `ID_PAGO` VARCHAR(10) NOT NULL,
  `FECHA` DATE NOT NULL,
  PRIMARY KEY (`ID_FACTURA`),
  INDEX `ID_PAGO_idx` (`ID_PAGO` ASC),
  CONSTRAINT `ID_PAGO`
    FOREIGN KEY (`ID_PAGO`)
    REFERENCES `IU`.`PAGO` (`ID_PAGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`LINEA_FACTURA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`LINEA_FACTURA` (
  `ID_LINEA_FACT` VARCHAR(10) NOT NULL,
  `ID_FACTURA` VARCHAR(10) NOT NULL,
  `PRODUCTO` VARCHAR(40) NULL,
  `CANTIDAD` SMALLINT NULL,
  `PRECIO` SMALLINT NULL,
  PRIMARY KEY (`ID_LINEA_FACT`, `ID_FACTURA`),
  INDEX `ID_FACTURA_idx` (`ID_FACTURA` ASC),
  CONSTRAINT `ID_FACTURA`
    FOREIGN KEY (`ID_FACTURA`)
    REFERENCES `IU`.`FACTURA` (`ID_FACTURA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`RECIBO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`RECIBO` (
  `ID_RECIBO` VARCHAR(10) NOT NULL,
  `ID_PAGO` VARCHAR(10) NOT NULL,
  `PRODUCTO` VARCHAR(40) NOT NULL,
  `PRECIO` SMALLINT NOT NULL,
  `CANTIDAD` SMALLINT NOT NULL,
  PRIMARY KEY (`ID_RECIBO`),
  INDEX `ID_PAGO_idx` (`ID_PAGO` ASC),
  CONSTRAINT `ID_PAGO`
    FOREIGN KEY (`ID_PAGO`)
    REFERENCES `IU`.`PAGO` (`ID_PAGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`CAJA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`CAJA` (
  `ID_PAGO` VARCHAR(10) NOT NULL,
  `ID_MOVIMIENTO` VARCHAR(10) NOT NULL,
  `EFECTIVO_INICIAL` INT(11) NOT NULL,
  `CANTIDAD` INT(11) NOT NULL,
  `EFECTIVO_FINAL` INT(11) NOT NULL,
  PRIMARY KEY (`ID_MOVIMIENTO`),
  INDEX `ID_PAGO_idx` (`ID_PAGO` ASC),
  CONSTRAINT `ID_PAGO`
    FOREIGN KEY (`ID_PAGO`)
    REFERENCES `IU`.`PAGO` (`ID_PAGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`CLIENTE_EXTERNO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`CLIENTE_EXTERNO` (
  `DNI_NIF` VARCHAR(9) NOT NULL,
  `NOMBRE` VARCHAR(80) NOT NULL,
  `APELLIDO` VARCHAR(40) NULL,
  `TELEFONO` INT(11) NULL,
  `EMAIL` VARCHAR(30) NULL,
  PRIMARY KEY (`DNI_NIF`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`SERVICIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`SERVICIO` (
  `ID_SERVICIO` VARCHAR(10) NOT NULL,
  `FECHA` DATE NOT NULL,
  `COSTE` INT(11) NOT NULL,
  `ID_PAGO` VARCHAR(10) NOT NULL,
  `DNI_NIF` VARCHAR(9) NOT NULL,
  `DESCRIPCION` TEXT NULL,
  PRIMARY KEY (`ID_SERVICIO`),
  INDEX `ID_PAGO_idx` (`ID_PAGO` ASC),
  INDEX `DNI_NIF_idx` (`DNI_NIF` ASC),
  CONSTRAINT `ID_PAGO`
    FOREIGN KEY (`ID_PAGO`)
    REFERENCES `IU`.`PAGO` (`ID_PAGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `DNI_NIF`
    FOREIGN KEY (`DNI_NIF`)
    REFERENCES `IU`.`CLIENTE_EXTERNO` (`DNI_NIF`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `IU`.`APLICA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `IU`.`APLICA` (
  `ID_DESCUENTO` VARCHAR(10) NOT NULL,
  `ID_ACTIVIDAD` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`ID_DESCUENTO`, `ID_ACTIVIDAD`),
  INDEX `ID_ACTIVIDAD_idx` (`ID_ACTIVIDAD` ASC),
  CONSTRAINT `ID_DESCUENTO`
    FOREIGN KEY (`ID_DESCUENTO`)
    REFERENCES `IU`.`DESCUENTO` (`ID_DESCUENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_ACTIVIDAD`
    FOREIGN KEY (`ID_ACTIVIDAD`)
    REFERENCES `IU`.`ACTIVIDAD` (`ID_ACTIVIDAD`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
